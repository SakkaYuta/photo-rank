# PhotoRank 画像処理マイクロサービス環境変数設定

# ===================
# サーバー設定
# ===================
NODE_ENV=development
PORT=3001

# ===================
# CORS設定
# ===================
# カンマ区切りで複数のオリジンを指定可能
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001,https://photo-rank.vercel.app

# ===================
# JWT認証設定
# ===================
# 必須: 最低32文字の強力な秘密鍵
JWT_SECRET=your_super_secret_jwt_key_at_least_32_characters_long
JWT_EXPIRES_IN=24h

# ===================
# Supabase設定
# ===================
# Supabaseプロジェクトの設定値
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key

# ===================
# 管理者API Key
# ===================
# 管理者操作用の強力なAPI Key
ADMIN_API_KEY=your_admin_api_key_for_administrative_operations

# ===================
# 画像処理設定
# ===================
# ファイルサイズ制限（バイト）
MAX_FILE_SIZE=52428800
# 最大画像サイズ（ピクセル）
MAX_WIDTH=4000
MAX_HEIGHT=4000
# デフォルト品質（1-100）
DEFAULT_QUALITY=80

# ===================
# 透かし設定
# ===================
WATERMARK_TEXT=PhotoRank
WATERMARK_OPACITY=0.5
WATERMARK_FONT_SIZE=48
WATERMARK_COLOR=#ffffff

# ===================
# Rate Limiting設定
# ===================
# 時間窓（ミリ秒）
RATE_LIMIT_WINDOW_MS=3600000
# 最大リクエスト数
RATE_LIMIT_MAX_REQUESTS=100
# 成功リクエストをスキップするか
RATE_LIMIT_SKIP_SUCCESS=false
# 失敗リクエストをスキップするか
RATE_LIMIT_SKIP_FAILED=false

# ===================
# セキュリティ設定
# ===================
# HTTPS強制（本番環境では true）
ENABLE_HTTPS_ONLY=false
# Content Security Policy有効化
CSP_ENABLED=true
# プロキシ信頼（ロードバランサー使用時は true）
TRUST_PROXY=false
# Cross-Origin Resource Policy
CORP_POLICY=cross-origin

# ===================
# ログ設定
# ===================
LOG_LEVEL=info
LOG_FORMAT=combined
ENABLE_ACCESS_LOG=true
ENABLE_ERROR_LOG=true

# ===================
# パフォーマンス設定
# ===================
ENABLE_COMPRESSION=true
COMPRESSION_LEVEL=6
KEEP_ALIVE_TIMEOUT=5000
HEADERS_TIMEOUT=60000

# ===================
# ヘルスチェック設定
# ===================
HEALTH_CHECK_TIMEOUT=3000
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_START_PERIOD=5000
HEALTH_CHECK_RETRIES=3

# ===================
# エラー処理設定
# ===================
# エラーレポート送信
REPORT_ERRORS=false
# エラー通知用Webhook URL
ERROR_WEBHOOK_URL=

# ===================
# Docker設定
# ===================
# Dockerヘルスチェック用フラグ
DOCKER_HEALTHCHECK=true